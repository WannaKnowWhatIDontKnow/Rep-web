# 버그 리뷰: Supabase 앱 문제점들

## 버그 요약
- **증상**: 로그인 후에도 데이터가 저장되지 않고, 조회 시 0개 항목만 반환됨
- **원인**: Supabase의 Row Level Security(RLS) 정책이 설정되지 않아 데이터 접근 권한이 없었음
- **해결**: RLS 정책을 추가하여 인증된 사용자가 자신의 데이터에 접근할 수 있도록 설정

## 교훈 및 개선점

### 1. 기본 개념부터 확인하기
- **문제**: 사용자가 기술적 배경지식이 없다는 점을 간과함
- **개선**: 항상 가장 기본적인 설정부터 확인하고 설명하기
- **예시**: Supabase는 기본적으로 모든 데이터 접근을 차단하며, 명시적인 RLS 정책이 필요함

### 2. 데이터베이스 권한 확인
- **문제**: 코드 수정에만 집중하고 데이터베이스 권한 설정을 확인하지 않음
- **개선**: 데이터 접근 문제 발생 시 항상 권한 설정부터 확인하기
- **체크리스트**: 
  - [ ] 테이블에 RLS가 활성화되어 있는가?
  - [ ] 적절한 읽기/쓰기 정책이 설정되어 있는가?
  - [ ] 사용자 인증이 올바르게 작동하는가?

### 3. 오류 메시지 분석
- **문제**: "RLS 정책 오류"라는 메시지를 더 심층적으로 분석하지 않음
- **개선**: 오류 메시지를 자세히 분석하고 근본 원인 파악하기
- **예시**: "정책 위반" 메시지는 RLS 정책 문제를 직접적으로 가리킴

## 향후 개발 시 주의사항
1. 사용자의 기술 지식 수준을 항상 고려하여 설명
2. 기본적인 설정과 권한부터 확인
3. 데이터베이스 관련 문제 발생 시 RLS 정책 확인
4. 데이터 타입 검증 및 변환 로직 추가

# 버그 리뷰: 대시보드 NaN 시간 문제

## 버그 요약
- **증상**: 대시보드에서 총 시간이 NaN으로 표시됨
- **원인**: 데이터베이스와 프론트엔드 간 필드명 불일치(initial_seconds vs initialSeconds) 및 숫자 타입 검증 부재
- **해결**: 데이터 형식 불일치 처리 및 NaN 값 검증 로직 추가

## 교훈 및 개선점

### 1. 데이터 형식 일관성 유지
- **문제**: 데이터베이스에서는 `initial_seconds`, 프론트엔드에서는 `initialSeconds`로 접근
- **개선**: 데이터 접근 시 필드명 차이를 일관되게 처리하는 로직 추가
- **예시**: `const seconds = rep.initial_seconds || rep.initialSeconds;`

### 2. 데이터 타입 검증
- **문제**: 숫자 연산 시 타입 검증 없이 사용하여 NaN 발생
- **개선**: 항상 숫자 타입인지 확인하고 유효한 값으로 변환
- **예시**: `typeof seconds === 'number' && !isNaN(seconds) ? seconds : 0`

### 3. 데이터 저장 시 타입 보장
- **문제**: 데이터 저장 시 타입 변환 없이 저장하여 불일치 발생
- **개선**: 저장 전에 항상 올바른 타입으로 변환
- **체크리스트**:
  - [ ] 숫자 필드는 숫자 타입으로 변환되었는가?
  - [ ] NaN 값이 저장되지 않도록 검증했는가?
  - [ ] 필드명이 일관되게 사용되는가?
4. 오류 메시지를 자세히 분석하여 근본 원인 파악
5. 문제 해결 후 사용자에게 이해하기 쉽게 설명
